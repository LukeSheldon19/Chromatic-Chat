<div class="chat-wrapper">
  <!-- Header -->
  <div class="chat-header">
    <div class="header-date">{{ messages.length > 0 ? (messages[0].timestamp | date:'MMMM d, yyyy') : (getCurrentDate() | date:'MMMM d, yyyy') }}</div>
  </div>

  <!-- Messages Container -->
  <div class="messages-container">
    <div *ngFor="let message of messages" class="message-wrapper" [class.user-message]="message.sender === 'user'">
      <div class="message-bubble" [style.background-color]="message.color">
        <div class="message-text">{{ message.text }}</div>
        <div class="message-time">{{ formatTime(message.timestamp) }}</div>
      </div>
    </div>
    
    <!-- Loading indicator -->
    <div *ngIf="isLoading" class="loading-indicator">
      <div class="loading-bubble">
        <div class="loading-dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Section -->
  <div class="input-section">
    <input 
      type="text" 
      [(ngModel)]="userInput" 
      placeholder="Enter message"
      (keyup.enter)="sendMessage()"
      class="message-input"
    />
    <button class="send-button" (click)="sendMessage()" [disabled]="!userInput.trim() || isLoading">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="22" y1="2" x2="11" y2="13"/>
        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
      </svg>
    </button>
  </div>
</div>